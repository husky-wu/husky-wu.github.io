<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HuskyWuã®åšå®¢</title>
  <icon>https://www.gravatar.com/avatar/677a3831b4f8567bbc2750dafb4fa06e</icon>
  <subtitle>Huskyã®æŠ€æœ¯åˆ†äº«</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://husky-wu.github.io/"/>
  <updated>2020-12-16T11:11:47.310Z</updated>
  <id>https://husky-wu.github.io/</id>
  
  <author>
    <name>HuskyWu</name>
    <email>beantech@gmail.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo-markdownå›¾ç‰‡è·¯å¾„è®¾ç½®-é€šç”¨</title>
    <link href="https://husky-wu.github.io/2020/12/16/hexo/hexo-markdown%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E8%AE%BE%E7%BD%AE-%E9%80%9A%E7%94%A8/"/>
    <id>https://husky-wu.github.io/2020/12/16/hexo/hexo-markdown%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E8%AE%BE%E7%BD%AE-%E9%80%9A%E7%94%A8/</id>
    <published>2020-12-16T09:10:57.000Z</published>
    <updated>2020-12-16T11:11:47.310Z</updated>
    
    <content type="html"><![CDATA[<p>[toc]</p><h2 id="ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾-å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®"><a href="#ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾-å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®" class="headerlink" title="ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾/å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®"></a>ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾/å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®</h2><blockquote><p>å·¥å…·ï¼šTypora</p><p>å®˜ç½‘ï¼š<a href="https://typora.io/" target="_blank" rel="noopener">https://typora.io/</a></p></blockquote><h3 id="1-æ–‡ä»¶-åå¥½è®¾ç½®"><a href="#1-æ–‡ä»¶-åå¥½è®¾ç½®" class="headerlink" title="1.æ–‡ä»¶-åå¥½è®¾ç½®"></a>1.æ–‡ä»¶-åå¥½è®¾ç½®</h3><p>undefined></p><h3 id="2-åå¥½è®¾ç½®-å›¾åƒ"><a href="#2-åå¥½è®¾ç½®-å›¾åƒ" class="headerlink" title="2.åå¥½è®¾ç½®-å›¾åƒ"></a>2.åå¥½è®¾ç½®-å›¾åƒ</h3><p>undefined></p><p>å¦‚ä¸Šå›¾ï¼Œæ’å…¥å›¾ç‰‡æ—¶ï¼š<strong>å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„</strong></p><p><strong>è·¯å¾„å¡«å†™</strong>ï¼š./${filename}</p><p>å‹¾é€‰ä»¥ä¸‹3é¡¹åŠŸèƒ½</p><ul><li><input checked="" disabled="" type="checkbox"> å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</li><li><input checked="" disabled="" type="checkbox"> å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</li><li><input checked="" disabled="" type="checkbox"> ä¼˜å…ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„</li></ul><h3 id="3-å…³é—­åå¥½è®¾ç½®"><a href="#3-å…³é—­åå¥½è®¾ç½®" class="headerlink" title="3.å…³é—­åå¥½è®¾ç½®"></a>3.å…³é—­åå¥½è®¾ç½®</h3><p>undefined></p><h3 id="4-å°†æˆªå›¾å¤åˆ¶åˆ°markdownä¸­"><a href="#4-å°†æˆªå›¾å¤åˆ¶åˆ°markdownä¸­" class="headerlink" title="4.å°†æˆªå›¾å¤åˆ¶åˆ°markdownä¸­"></a>4.å°†æˆªå›¾å¤åˆ¶åˆ°markdownä¸­</h3><p>å¯ä»¥çœ‹åˆ°å›¾ç‰‡è·¯å¾„ä¸ºå¦‚ä¸‹æ ¼å¼ï¼š![å›¾ç‰‡æ–‡ä»¶å]+(æ–‡æ¡£å/å›¾ç‰‡æ–‡ä»¶å.png)</p><p>undefined></p><h2 id="äºŒã€æ›´æ”¹hexoæ ¼å¼è½¬æ¢æ–‡ä»¶"><a href="#äºŒã€æ›´æ”¹hexoæ ¼å¼è½¬æ¢æ–‡ä»¶" class="headerlink" title="äºŒã€æ›´æ”¹hexoæ ¼å¼è½¬æ¢æ–‡ä»¶"></a>äºŒã€æ›´æ”¹hexoæ ¼å¼è½¬æ¢æ–‡ä»¶</h2><h3 id="1-æ‰¾åˆ°marked-jsæ–‡ä»¶"><a href="#1-æ‰¾åˆ°marked-jsæ–‡ä»¶" class="headerlink" title="1.æ‰¾åˆ°marked.jsæ–‡ä»¶"></a>1.æ‰¾åˆ°marked.jsæ–‡ä»¶</h3><p>è·¯å¾„ï¼šnode_modules\marked\lib\marked.js</p><h3 id="2-æ‰“å¼€marked-jsç¼–è¾‘"><a href="#2-æ‰“å¼€marked-jsç¼–è¾‘" class="headerlink" title="2.æ‰“å¼€marked.jsç¼–è¾‘"></a>2.æ‰“å¼€marked.jsç¼–è¾‘</h3><p>æ‰¾åˆ°å¦‚ä¸‹ä»£ç éƒ¨åˆ†ï¼Œè¯¥ä»£ç å—ä¸º hexo gæ—¶ï¼Œè½¬æ¢markdownçš„è¯­æ³•é€»è¾‘</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Renderer.prototype.image = function(href, title, text) &#123;</span><br><span class="line">  href = cleanUrl(<span class="keyword">this</span>.options.sanitize, <span class="keyword">this</span>.options.baseUrl, href);</span><br><span class="line">  <span class="keyword">if</span> (href === <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> out = <span class="string">'&lt;img src="'</span> + href + <span class="string">'" alt="'</span> + text + <span class="string">'"'</span>;</span><br><span class="line">  <span class="keyword">if</span> (title) &#123;</span><br><span class="line">    out += <span class="string">' title="'</span> + title + <span class="string">'"'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  out += <span class="keyword">this</span>.options.xhtml ? <span class="string">'/&gt;'</span> : <span class="string">'&gt;'</span>;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœ¬æ¬¡æ“ä½œä¸­å°†è¯¥éƒ¨åˆ†æ³¨é‡Šæ‰ï¼Œå¹¶æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç </p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Renderer.prototype.image = function(href, title, text) &#123;</span><br><span class="line">  href = cleanUrl(<span class="keyword">this</span>.options.sanitize, <span class="keyword">this</span>.options.baseUrl, href);</span><br><span class="line">  <span class="keyword">if</span> (href === <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> out = <span class="string">'&lt;img src="'</span>+<span class="string">'../'</span> + href + <span class="string">'" alt="'</span> + text + <span class="string">'"'</span>;</span><br><span class="line">  <span class="keyword">if</span> (title) &#123;</span><br><span class="line">    out += <span class="string">' title="'</span> + title + <span class="string">'"'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  out += <span class="keyword">this</span>.options.xhtml ? <span class="string">'/&gt;'</span> : <span class="string">'&gt;'</span>;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å³ï¼Œåœ¨hexo då å°†markdownå›¾ç‰‡è·¯å¾„å‰æ·»åŠ â€œ../â€å­—ç¬¦ï¼Œè½¬æ¢ä¸ºgithubä¸­æ–‡ä»¶è·¯å¾„ï¼ˆæ­¤éƒ¨åˆ†å¯èƒ½ä¼šç”±äºä¸åŒçš„ä¸»é¢˜è€Œæœ‰æ‰€ä¸åŒï¼Œè¯·æ ¹æ®ä¸»é¢˜ç”Ÿæˆåçš„è·¯å¾„æ ¼å¼è¿›è¡Œä¿®æ”¹ï¼‰</p><h3 id="3-æŸ¥çœ‹ç”Ÿæˆçš„index-htmlæ–‡ä»¶ä¸­imgæ ¼å¼"><a href="#3-æŸ¥çœ‹ç”Ÿæˆçš„index-htmlæ–‡ä»¶ä¸­imgæ ¼å¼" class="headerlink" title="3.æŸ¥çœ‹ç”Ÿæˆçš„index.htmlæ–‡ä»¶ä¸­imgæ ¼å¼"></a>3.æŸ¥çœ‹ç”Ÿæˆçš„index.htmlæ–‡ä»¶ä¸­imgæ ¼å¼</h3><p>æœªæ›´æ”¹å‰markdownä¸­è·¯å¾„ï¼š</p><p>undefined></p><p>æœªæ›´æ”¹å‰æ¸²æŸ“å‡ºçš„index.html imgè·¯å¾„æ ¼å¼ï¼š</p><p>undefined></p><p>æœªæ›´æ”¹å‰æ¸²æŸ“å‡ºçš„index.html imgè·¯å¾„webæ˜¾ç¤ºï¼š</p><p>undefined></p><p>æ›´æ”¹åæ¸²æŸ“å‡ºçš„index.html imgè·¯å¾„æ ¼å¼ï¼š</p><p>undefined></p><p>æ›´æ”¹åæ¸²æŸ“å‡ºçš„index.html imgè·¯å¾„webæ˜¾ç¤ºï¼š</p><p>undefined></p><p>ä»¥ä¸Šï¼Œåˆ†äº«å®Œæ¯•ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å„ä½ğŸ˜</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;[toc]&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾-å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®&quot;&gt;&lt;a href=&quot;#ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾-å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Markdownå›¾åƒï¼ˆæˆªå›¾/å¤åˆ¶å›¾ï¼‰è·¯å¾„è®¾ç½®&quot;&gt;&lt;/a&gt;ä¸€
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://husky-wu.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://husky-wu.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexoå¼•å…¥fancyboxä¼˜åŒ–å›¾ç‰‡è§†é¢‘æŸ¥çœ‹æ•ˆæœ</title>
    <link href="https://husky-wu.github.io/2020/12/16/hexo/hexo%E5%BC%95%E5%85%A5fancybox%E4%BC%98%E5%8C%96%E5%9B%BE%E7%89%87%E8%A7%86%E9%A2%91%E6%9F%A5%E7%9C%8B%E6%95%88%E6%9E%9C/"/>
    <id>https://husky-wu.github.io/2020/12/16/hexo/hexo%E5%BC%95%E5%85%A5fancybox%E4%BC%98%E5%8C%96%E5%9B%BE%E7%89%87%E8%A7%86%E9%A2%91%E6%9F%A5%E7%9C%8B%E6%95%88%E6%9E%9C/</id>
    <published>2020-12-16T08:05:24.000Z</published>
    <updated>2020-12-16T11:36:32.558Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>sakura</p></blockquote><blockquote><p>undefined></p></blockquote><h1 id="ä¸€ã€fancyboxä»‹ç»"><a href="#ä¸€ã€fancyboxä»‹ç»" class="headerlink" title="ä¸€ã€fancyboxä»‹ç»"></a>ä¸€ã€fancyboxä»‹ç»</h1><p>åœ¨æˆ‘ä»¬å¹³å¸¸é˜…è¯»åšæ–‡æ—¶ï¼Œå¸¸é‡åˆ°ï¼š<code>å›¾ç‰‡å¤ªå°ï¼Œå­—çœ‹ä¸æ¸…</code>çš„æƒ…å†µ<br>undefined><br>ä¸æ€•ï¼Œfancyboxå¯ä»¥å°†ä½ çš„å›¾ç‰‡æ”¾å¤§ï¼<br>undefined><br>å¼ºå¤§çš„ç›¸å†ŒåŠŸèƒ½ï¼<br>undefined><br>åŸç†ï¼šç»™æ‰€æœ‰å›¾ç‰‡åŠ ä¸€å±‚aæ ‡ç­¾ï¼Œå¹¶é“¾æ¥å›¾ç‰‡åœ°å€åˆ°è’™ç‰ˆå±‚é¢ä¸Š</p><p>ç®€å•æºç ï¼šï¼ˆå¤šå›¾ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ï¼DOCTYPE</span> <span class="attr">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span> =<span class="string">â€œ</span> <span class="attr">utf-8</span>â€&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>æˆ‘çš„é¡µé¢<span class="tag">&lt;/ <span class="attr">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--CSS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> =<span class="string">â€œ</span> <span class="attr">stylesheet</span>â€ <span class="attr">type</span> =<span class="string">â€œ</span> <span class="attr">text</span> / <span class="attr">css</span>â€ <span class="attr">href</span> =<span class="string">â€œ</span> <span class="attr">jquery.fancybox.min.css</span>â€&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¸€ç»„å›¾ç‰‡ ï¼Œaæ ‡ç­¾çš„data-fancyboxå±æ€§å¾ˆé‡è¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"image_1.jpg"</span> <span class="attr">data-fancybox</span>=<span class="string">"gallery"</span> <span class="attr">data-caption</span>=<span class="string">"Caption #1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"thumbnail_1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"image_2.jpg"</span> <span class="attr">data-fancybox</span>=<span class="string">"gallery"</span> <span class="attr">data-caption</span>=<span class="string">"Caption #2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"thumbnail_2.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ï¼-JS-</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span> </span></span></span><br><span class="line"><span class="javascript">$(<span class="string">'[data-fancybox="images"]'</span>).fancybox(&#123;</span></span><br><span class="line">    thumbs : &#123;</span><br><span class="line"><span class="actionscript">      autoStart : <span class="literal">true</span> <span class="comment">//ç¼©ç•¥å›¾</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="javascript">  $(<span class="string">'[data-fancybox]'</span>).fancybox(&#123;</span></span><br><span class="line"><span class="actionscript">    protect: <span class="literal">true</span>,<span class="comment">//å›¾ç‰‡å³é”®ä¸èƒ½ä¸‹è½½</span></span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132</span><br></pre></td></tr></table></figure><p>è§†é¢‘ï¼šï¼ˆå¼¹çª—æ’­æ”¾ï¼‰<br>undefined></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ï¼DOCTYPE</span> <span class="attr">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span> =<span class="string">â€œ</span> <span class="attr">utf-8</span>â€&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>æˆ‘çš„é¡µé¢<span class="tag">&lt;/ <span class="attr">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--CSS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> =<span class="string">â€œ</span> <span class="attr">stylesheet</span>â€ <span class="attr">type</span> =<span class="string">â€œ</span> <span class="attr">text</span> / <span class="attr">css</span>â€ <span class="attr">href</span> =<span class="string">â€œ</span> <span class="attr">jquery.fancybox.min.css</span>â€&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span> <span class="attr">href</span>=<span class="string">"https://www.youtube.com/watch?v=_sI_Ps7JSEk"</span>&gt;</span></span><br><span class="line">    YouTube video</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span> <span class="attr">href</span>=<span class="string">"https://vimeo.com/191947042"</span>&gt;</span></span><br><span class="line">    Vimeo video</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span> <span class="attr">data-width</span>=<span class="string">"640"</span> <span class="attr">data-height</span>=<span class="string">"360"</span> <span class="attr">href</span>=<span class="string">"video.mp4"</span>&gt;</span></span><br><span class="line">    Direct link to MP4 video</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span> <span class="attr">href</span>=<span class="string">"#myVideo"</span>&gt;</span></span><br><span class="line">    HTML5 video element</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"320"</span> <span class="attr">controls</span> <span class="attr">id</span>=<span class="string">"myVideo"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"https://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"https://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.webm"</span> <span class="attr">type</span>=<span class="string">"video/webm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"https://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.ogv"</span> <span class="attr">type</span>=<span class="string">"video/ogg"</span>&gt;</span></span><br><span class="line">    Your browser doesn't support HTML5 video tag.</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- fancyboxå¤§å›¾æŸ¥çœ‹ éœ€jq --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/jquery.fancybox.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  $(<span class="string">'[data-fancybox]'</span>).fancybox(&#123;</span></span><br><span class="line">    youtube : &#123;</span><br><span class="line">        controls : 0,</span><br><span class="line">        showinfo : 0</span><br><span class="line">    &#125;,</span><br><span class="line">    vimeo : &#123;</span><br><span class="line"><span class="actionscript">        color : <span class="string">'f00'</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445</span><br></pre></td></tr></table></figure><blockquote><p>æ–‡æ¡£ï¼š<a href="https://fancyapps.com/fancybox/3/docs/" target="_blank" rel="noopener">https://fancyapps.com/fancybox/3/docs/</a><br>ä¸­æ–‡ç¿»è¯‘å‚è€ƒï¼š<a href="https://salongweb.com/fancybox3.html" target="_blank" rel="noopener">jQuery å¼ºå¤§ä¸°å¯Œçš„å“åº”å¼å¼¹å‡ºæ¡†æ’ä»¶ fancyBox3</a><br>å¾ˆè¯¦å°½å¾ˆä¸°å¯Œï¼Œæ‹¿åˆ°æ‰‹åˆæœ‰ä¸€ç‚¹å¤´å¤§ï¼æœ¬æ–‡æ˜¯hexo-sakuraä¸»é¢˜åšå®¢æ•´åˆfancyboxæ’ä»¶å®ä¾‹çš„æ•™ç¨‹ï¼</p></blockquote><h1 id="äºŒã€hexoä¸­æ·»åŠ fancybox"><a href="#äºŒã€hexoä¸­æ·»åŠ fancybox" class="headerlink" title="äºŒã€hexoä¸­æ·»åŠ fancybox"></a>äºŒã€hexoä¸­æ·»åŠ fancybox</h1><h2 id="1-æ·»åŠ å¼•ç”¨"><a href="#1-æ·»åŠ å¼•ç”¨" class="headerlink" title="1. æ·»åŠ å¼•ç”¨"></a>1. æ·»åŠ å¼•ç”¨</h2><ol><li><p>åˆ†åˆ«åœ¨head.ejså’Œfooter.ejsï¼šåˆ å»zoomå¼•ç”¨ï¼Œåªä¿ç•™fancyboxï¼›<br>undefined></p></li><li><p>åœ¨footerä¸­æ·»åŠ cdnåŠ é€Ÿç‰ˆjQueryå¼•ç”¨</p><p>å®Œæ•´çš„å¼•ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/jquery.fancybox.min.css"</span> <span class="attr">media</span>=<span class="string">"all"</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- fancyboxå¤§å›¾æŸ¥çœ‹ éœ€jq --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/jquery.fancybox.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  $(<span class="string">'[data-fancybox="images"]'</span>).fancybox(&#123;<span class="comment">//å¯é€‰</span></span></span><br><span class="line">    thumbs : &#123;</span><br><span class="line"><span class="actionscript">      autoStart : <span class="literal">true</span> <span class="comment">//ç¼©ç•¥å›¾</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="javascript">  $(<span class="string">'[data-fancybox]'</span>).fancybox(&#123;<span class="comment">//å¯ç”¨å‡½æ•°ï¼Œå¿…é¡»</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">//protect: true //å›¾ç‰‡å³é”®ä¸èƒ½ä¸‹è½½ï¼Œå¯é€‰</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-ä¿®æ”¹é…ç½®"><a href="#2-ä¿®æ”¹é…ç½®" class="headerlink" title="2.ä¿®æ”¹é…ç½®"></a>2.ä¿®æ”¹é…ç½®</h2><p>hexoæ˜¯mdæ ¼å¼æ–‡ä»¶ç”Ÿæˆçš„é™æ€é¡µé¢ï¼Œ<br>è¯´æ˜ä¸€ä¸‹<code>node_modules\marked\lib\marked.js</code>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ï¼š</p><ul><li><p>marked.jsæ˜¯ä¸€ä¸ªç”¨JavaScriptå†™çš„åŠŸèƒ½é½å…¨çš„Markdownè§£æå™¨å’Œç¼–è¯‘å™¨ã€‚å¯ä»¥éå¸¸æ–¹ä¾¿çš„åœ¨çº¿ç¼–è¯‘Markdownä»£ç ä¸ºHTMLå¹¶ç›´æ¥æ˜¾ç¤ºï¼Œå¹¶ä¸”æ”¯æŒå®Œå…¨çš„è‡ªå®šä¹‰å„ç§æ ¼å¼ã€‚</p></li><li><p>å®ƒçš„ä½œç”¨ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</span>](<span class="link">https://img-blog.csdnimg.cn/20200304135000622.png</span>)</span><br><span class="line">è½¬æ¢æˆï¼š</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-action</span>=<span class="string">"zoom"</span> <span class="attr">src</span>=<span class="string">"https://img-blog.csdnimg.cn/20200304135000622.png"</span> <span class="attr">alt</span>=<span class="string">"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"</span>&gt;</span></span></span><br><span class="line">123</span><br></pre></td></tr></table></figure></li></ul><p>æˆ‘ä»¬è¦è¿›ä¸€æ­¥è½¬æ¢æˆå«aæ ‡ç­¾çš„fancyboxå¯è°ƒç”¨çš„æ ·å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span>=<span class="string">"gallery"</span> <span class="attr">rel</span>=<span class="string">"group1 noopener"</span> <span class="attr">href</span>=<span class="string">"https://img-blog.csdnimg.cn/20200304135000622.png"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-action</span>=<span class="string">"zoom"</span> <span class="attr">src</span>=<span class="string">"https://img-blog.csdnimg.cn/20200304135000622.png"</span> <span class="attr">alt</span>=<span class="string">"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><ol><li><p>ä¿®æ”¹é™æ€æ–‡ä»¶</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules\marked\<span class="class"><span class="keyword">lib</span>\<span class="title">marked</span>.<span class="title">js</span></span></span><br></pre></td></tr></table></figure><p>ctrl+F æœç´¢</p></li></ol>   <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Renderer</span><span class="selector-class">.prototype</span><span class="selector-class">.image</span></span><br></pre></td></tr></table></figure><p>   å‡½æ•°ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Renderer.prototype.image = <span class="function"><span class="keyword">function</span>(<span class="params">href, title, text</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);</span></span><br><span class="line">  <span class="comment">// if (href === null) &#123;</span></span><br><span class="line">  <span class="comment">//   return text;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// var out = '&lt;img src="' + href + '" alt="' + text + '"';</span></span><br><span class="line">  <span class="comment">// if (title) &#123;</span></span><br><span class="line">  <span class="comment">//   out += ' title="' + title + '"';</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// out += this.options.xhtml ? '/&gt;' : '&gt;';</span></span><br><span class="line">  <span class="comment">// return out;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.options.baseUrl &amp;&amp; !originIndependentUrl.test(href)) &#123;</span><br><span class="line">    href = resolveUrl(<span class="keyword">this</span>.options.baseUrl, href);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> out = <span class="string">'&lt;a data-fancybox="gallery" data-caption="'</span>+text+<span class="string">'" href="'</span>+href+<span class="string">'"&gt;&lt;img data-action="zoom" src="'</span> + href + <span class="string">'" alt="'</span> + text + <span class="string">'"'</span>;</span><br><span class="line">  <span class="keyword">if</span> (title) &#123;</span><br><span class="line">    out += <span class="string">' title="'</span> + title + <span class="string">'"'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  out += <span class="keyword">this</span>.options.xhtml ? <span class="string">'/&gt;&lt;/a&gt;'</span> : <span class="string">'&gt;&lt;/a&gt;'</span>;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">12345678910111213141516171819202122</span></span><br></pre></td></tr></table></figure><p>   ç°åœ¨å·²ç»å¤§åŠŸå‘Šæˆï¼Œå¯ä»¥å®ç°æ•ˆæœäº†ï¼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;sakura&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;undefined&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;ä¸€ã€fancyboxä»‹ç»&quot;&gt;&lt;a href=&quot;#ä¸€ã€fancyboxä»‹ç»&quot; class=&quot;h
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://husky-wu.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://husky-wu.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²</title>
    <link href="https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.1%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%91%E5%B1%95%E7%AE%80%E5%8F%B2/"/>
    <id>https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.1%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%91%E5%B1%95%E7%AE%80%E5%8F%B2/</id>
    <published>2020-12-15T06:37:05.000Z</published>
    <updated>2020-12-16T08:31:04.630Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²"><a href="#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²" class="headerlink" title="TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²"></a>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²</h1><h1 id="1-1-A-Brief-History-of-Distributed-Database-ï¼ˆåˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²ï¼‰"><a href="#1-1-A-Brief-History-of-Distributed-Database-ï¼ˆåˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²ï¼‰" class="headerlink" title="1.1 A Brief History of Distributed Database ï¼ˆåˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²ï¼‰"></a>1.1 A Brief History of Distributed Database ï¼ˆåˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²ï¼‰</h1><p>æœ¬è¯¾ç¨‹ç®€è¦ä»‹ç»äº†ä» 20 ä¸–çºªåˆ° 21 ä¸–çºªåˆ†å¸ƒå¼æ•°æ®åº“çš„å‘å±•å†å²</p><p>å­¦ä¹ ç›®æ ‡ï¼š å¸®åŠ©å­¦å‘˜äº†è§£åˆ†å¸ƒå¼æ•°æ®åº“çš„å‘å±•å†å²</p><p>å…³é”®çŸ¥è¯†ç‚¹ï¼š åˆ†å¸ƒå¼æ•°æ®åº“å†å²ï¼ŒNoSQL å’Œ NewSQLï¼ŒOLTP å’Œ HTAPï¼Œæ–°æŠ€æœ¯</p><p>è®²å¸ˆï¼šå†¯ç«‹å…ƒ è€å¸ˆ</p><p>undefined></p><p><strong>20ä¸–çºªåˆï¼š</strong></p><ul><li>æ•°æ®åº“ä¸šæ€ç¯å¢ƒ ä»¥ OLTPä¸ºä¸»</li><li>åŸºäºSQLäº¤äº’</li><li>å•èŠ‚ç‚¹/èµ„æºå…±äº«</li><li>äº‹åŠ¡é‡å°ï¼Œå¹¶å‘ä½ï¼Œå•æœºæ•°æ®åº“ï¼Œå…±äº«ç¡¬ä»¶èµ„æº</li></ul><p>undefined></p><p><strong>21ä¸–çºª-äº’è”ç½‘æ—¶ä»£ï¼š</strong></p><ul><li>éšç€ä¸šåŠ¡é‡å¹¶å‘çš„å¢åŠ ï¼Œå¼€å§‹å‘å±•ä¸­é—´ä»¶å’Œå¤šèŠ‚ç‚¹æ•°æ®åº“</li></ul><p>undefined></p><p><strong>21ä¸–çºª-äº’è”ç½‘æ—¶ä»£ï¼š</strong></p><ul><li>éšç€æ•°æ®é‡æš´å¢ï¼Œå¼€å§‹å‘å±•å¤§æ•°æ®ä¸æ•°æ®ä»“åº“ </li><li>åŸºäºç¼–ç¨‹è¯­è¨€APIäº¤äº’</li></ul><p>undefined></p><p><strong>21ä¸–çºª-äº’è”ç½‘æ—¶ä»£åŒæœŸï¼š</strong></p><ul><li><p>æ•°æ®é‡è¿›ä¸€æ­¥å¢åŠ ï¼ŒåŒæ—¶è¡ç”Ÿå‡ºå¤§æ•°æ®åˆ†æçš„éœ€æ±‚-OLAPï¼šæŒ‰åˆ—å­˜å‚¨</p></li><li><p>åŸºäºSQLè¿›è¡Œäº¤äº’</p></li><li><p>èµ„æºç‹¬äº«</p></li><li><p>åˆ—å¼å­˜å‚¨</p></li><li><p>OLAPå·¥ä½œ</p><p>undefined></p></li></ul><p><strong>21ä¸–çºª-äº’è”ç½‘æ—¶ä»£åŒæœŸï¼š</strong></p><ul><li><p>nosqlå…´èµ·ï¼šé«˜å¯ç”¨ key-valueï¼Œäº’è”ç½‘ç¯å¢ƒä¸­ å¤åˆ¶çš„ å¯é æ€§å’Œå¯æ‹“å±•æ€§ç›¸æ¯”äºä¸šåŠ¡çš„å‘å±•ä»¥åŠé«˜æ€§èƒ½é«˜å¯ç”¨çš„éœ€æ±‚ï¼Œä¸å†é‚£ä¹ˆçš„é‡è¦</p></li><li><p>åŸºäºé”®å€¼å¯¹APIäº¤äº’</p></li><li><p>éäº‹åŠ¡ï¼Œéå…³ç³»å‹ï¼Œéschema</p></li><li><p>é«˜æ€§èƒ½</p></li><li><p>é«˜å¯ç”¨æ€§</p></li><li><p>èµ„æºç‹¬äº«</p><p>undefined></p></li></ul><p><strong>2010å¹´ï¼š</strong></p><p>éšç€OLTPå’ŒOLAPæ•°æ®åº“çš„å‘å±•ï¼Œå‘å±•äº†æ··åˆå‹åˆ†æå‹æ•°æ®åº“ï¼ŒNewSQLåº”è¿è€Œç”Ÿï¼Œå…¶ä¸å†å±€é™äºä»…æ”¯æŒOLTPçš„ACIDäº‹åŠ¡</p><ul><li>åŸºäºSQLäº¤äº’</li><li>èµ„æºç‹¬äº«</li></ul><p>undefined></p><p><strong>TiDBå³NewSQL æ•°æ®åº“çš„ä¸€ç§ï¼š</strong></p><ul><li>åŸºäºSQLäº¤äº’</li><li>OLTP&amp;OLAPå·¥ä½œ</li><li>èµ„æºç‹¬äº«</li><li>é«˜æ€§èƒ½</li><li>é«˜å¯ç”¨æ€§</li></ul><p>undefined></p><p>æ€ç»´å¯¼å›¾ï¼š</p><p>undefined></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²&quot;&gt;&lt;a href=&quot;#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²&quot; class=&quot;headerlink&quot; title=&quot;TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.1åˆ†å¸ƒå¼æ•°æ®åº“å‘å±•ç®€å²&quot;&gt;&lt;/a&gt;TiDB4.0è¯¾ç¨‹å­¦ä¹ 
      
    
    </summary>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/categories/TiDB/"/>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/tags/TiDB/"/>
    
      <category term="å­¦ä¹ è¯¾ç¨‹" scheme="https://husky-wu.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AF%BE%E7%A8%8B/"/>
    
      <category term="åˆ†å¸ƒå¼" scheme="https://husky-wu.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.2HTAP æ•°æ®åº“ç®€ä»‹</title>
    <link href="https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.2HTAP%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%80%E4%BB%8B/"/>
    <id>https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.2HTAP%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%80%E4%BB%8B/</id>
    <published>2020-12-15T06:37:05.000Z</published>
    <updated>2020-12-15T08:15:52.615Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-2HTAP-æ•°æ®åº“ç®€ä»‹"><a href="#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-2HTAP-æ•°æ®åº“ç®€ä»‹" class="headerlink" title="TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.2HTAP æ•°æ®åº“ç®€ä»‹"></a>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.2HTAP æ•°æ®åº“ç®€ä»‹</h1><h1 id="1-2-Whatâ€™s-an-HTAP-Database-ï¼ˆHTAP-æ•°æ®åº“ç®€ä»‹ï¼‰"><a href="#1-2-Whatâ€™s-an-HTAP-Database-ï¼ˆHTAP-æ•°æ®åº“ç®€ä»‹ï¼‰" class="headerlink" title="1.2 Whatâ€™s an HTAP Database? ï¼ˆHTAP æ•°æ®åº“ç®€ä»‹ï¼‰"></a>1.2 Whatâ€™s an HTAP Database? ï¼ˆHTAP æ•°æ®åº“ç®€ä»‹ï¼‰</h1><p>1.2 Why HTAP Mattersï¼ˆHTAP æ•°æ®åº“ç®€ä»‹ï¼‰</p><p>æœ¬è¯¾ç¨‹ç®€è¦ä»‹ç»äº† HTAP æ„ä¹‰ï¼ŒæŠ€æœ¯éš¾ç‚¹ï¼ŒTiDB å¦‚ä½•å®ç° HTAP ä»¥åŠç›¸å…³çš„åº”ç”¨åœºæ™¯ã€‚</p><p>å­¦ä¹ ç›®æ ‡ï¼š å¸®åŠ©å­¦å‘˜ç†Ÿæ‚‰ HTAP é¢†åŸŸ</p><p>å…³é”®çŸ¥è¯†ç‚¹ï¼š HTAPæ„ä¹‰ï¼›è®¾è®¡åŸåˆ™ä»¥åŠåº”ç”¨åœºæ™¯</p><p>undefined></p><p>undefined></p><p>ä¸ºä»€ä¹ˆéœ€è¦HTAP</p><p>undefined></p><h2 id="1-ä»€ä¹ˆæ˜¯HTAP"><a href="#1-ä»€ä¹ˆæ˜¯HTAP" class="headerlink" title="1.ä»€ä¹ˆæ˜¯HTAP"></a>1.ä»€ä¹ˆæ˜¯HTAP</h2><p>undefined></p><p>undefined></p><p>undefined></p><p>undefined></p><p>undefined></p><p>undefined></p><p>undefined></p><p>ç´§å¯†è€¦åˆ/å®æ—¶æ›´æ–°æŸ¥è¯¢</p><p>undefined></p><p>undefined></p><p>undefined></p><p>1.å¯æ›´æ–°çš„åˆ—å­˜å¼•æ“ï¼Œåˆ—å­˜å‰¯æœ¬</p><p>undefined></p><p>RAFT Groupåè®®</p><p>undefined></p><p>undefined></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-2HTAP-æ•°æ®åº“ç®€ä»‹&quot;&gt;&lt;a href=&quot;#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-2HTAP-æ•°æ®åº“ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.2HTAP æ•°æ®åº“ç®€ä»‹&quot;&gt;&lt;/a&gt;TiDB4.0è¯¾ç¨‹å­¦ä¹ 
      
    
    </summary>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/categories/TiDB/"/>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/tags/TiDB/"/>
    
      <category term="å­¦ä¹ è¯¾ç¨‹" scheme="https://husky-wu.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AF%BE%E7%A8%8B/"/>
    
      <category term="åˆ†å¸ƒå¼" scheme="https://husky-wu.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.3TiDBå‘å±•ç®€å²</title>
    <link href="https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.3TiDB%E5%8F%91%E5%B1%95%E7%AE%80%E5%8F%B2/"/>
    <id>https://husky-wu.github.io/2020/12/15/TiDB4.0/TiDB4.0%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-1.3TiDB%E5%8F%91%E5%B1%95%E7%AE%80%E5%8F%B2/</id>
    <published>2020-12-15T06:37:05.000Z</published>
    <updated>2020-12-15T09:41:25.174Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-3TiDBå‘å±•ç®€å²"><a href="#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-3TiDBå‘å±•ç®€å²" class="headerlink" title="TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.3TiDBå‘å±•ç®€å²"></a>TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.3TiDBå‘å±•ç®€å²</h1><h1 id="1-3-A-Brief-History-About-the-TiDB-database-platformï¼ˆTiDB-å‘å±•ç®€å²ï¼‰"><a href="#1-3-A-Brief-History-About-the-TiDB-database-platformï¼ˆTiDB-å‘å±•ç®€å²ï¼‰" class="headerlink" title="1.3 A Brief History About the TiDB database platformï¼ˆTiDB å‘å±•ç®€å²ï¼‰"></a>1.3 A Brief History About the TiDB database platformï¼ˆTiDB å‘å±•ç®€å²ï¼‰</h1><p>æœ¬è¯¾ç¨‹ç®€è¦ä»‹ç»äº† TiDB çš„å‘å±•å†å²ã€‚è‡ªä» v1.0.0 GA å¼€å§‹ï¼ŒTiDB åšåˆ°äº†ï¼šå¯ä»¥ä»è®¡ç®—å’Œå­˜å‚¨ä¸¤ä¸ªå±‚é¢çš„æ— é™æ‰©å±•ï¼Œå…¼å®¹äº† MySQL çš„è¯­æ³•å’Œåè®®ï¼Œå¼ºä¸€è‡´çš„çœŸåˆ†å¸ƒå¼äº‹åŠ¡ã€‚åˆ°ä»Šå¤©ï¼ŒTiDB å¯ä»¥ç§°ä¸ºä¸€ä¸ªçœŸæ­£çš„ HTAP ç³»ç»Ÿï¼Œä¸éœ€è¦ ETL å·¥å…·è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œåœ¨ç³»ç»Ÿè¿è¡Œ OLTP ä¸šåŠ¡æ—¶ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿çš„è¿›è¡ŒæŠ¥è¡¨æŸ¥è¯¢ã€‚</p><p>å­¦ä¹ ç›®æ ‡ï¼š äº†è§£ TiDB çš„å‘å±•å†å²</p><p>å…³é”®çŸ¥è¯†ç‚¹ï¼š TiDBï¼›HTAPï¼›æ•°æ®ä¸­å°ï¼›TiSparkï¼›TiFlash</p><p>undefined></p><p>undefined></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-3TiDBå‘å±•ç®€å²&quot;&gt;&lt;a href=&quot;#TiDB4-0è¯¾ç¨‹å­¦ä¹ -1-3TiDBå‘å±•ç®€å²&quot; class=&quot;headerlink&quot; title=&quot;TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.3TiDBå‘å±•ç®€å²&quot;&gt;&lt;/a&gt;TiDB4.0è¯¾ç¨‹å­¦ä¹ -1.3Ti
      
    
    </summary>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/categories/TiDB/"/>
    
    
      <category term="TiDB" scheme="https://husky-wu.github.io/tags/TiDB/"/>
    
      <category term="å­¦ä¹ è¯¾ç¨‹" scheme="https://husky-wu.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AF%BE%E7%A8%8B/"/>
    
      <category term="åˆ†å¸ƒå¼" scheme="https://husky-wu.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Oracle-DataGuard-Rman-auxiliaryæ­å»ºå¤‡åº“</title>
    <link href="https://husky-wu.github.io/2020/05/25/Oracle/Oracle-DataGuard-Rman-auxiliary%E6%90%AD%E5%BB%BA%E5%A4%87%E5%BA%93/"/>
    <id>https://husky-wu.github.io/2020/05/25/Oracle/Oracle-DataGuard-Rman-auxiliary%E6%90%AD%E5%BB%BA%E5%A4%87%E5%BA%93/</id>
    <published>2020-05-25T06:37:05.000Z</published>
    <updated>2020-06-22T03:22:13.356Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç¯å¢ƒä»‹ç»"><a href="#1-ç¯å¢ƒä»‹ç»" class="headerlink" title="1.ç¯å¢ƒä»‹ç»"></a>1.ç¯å¢ƒä»‹ç»</h2><p>ç™¾è´§â€“æ•°æ®åº“æœåŠ¡å™¨</p><table><thead><tr><th>å®ä¾‹åç§°</th><th>IP</th><th>è´¦æˆ·</th><th>å¯†ç </th><th>db_name</th><th>db_unique_name</th><th>service_name</th></tr></thead><tbody><tr><td>zbds-baihuo-DB01</td><td>172.16.35.141</td><td>zyadmin</td><td><strong>**</strong></td><td>zbdsora</td><td>zbdsora</td><td>zbdsora</td></tr><tr><td>zbds-baihuo-DB02</td><td>172.16.35.140</td><td>zyadmin</td><td><strong>**</strong></td><td>zbdsora</td><td>zbdsora_std</td><td>zbdsora_std</td></tr></tbody></table><h2 id="2-DGéƒ¨ç½²"><a href="#2-DGéƒ¨ç½²" class="headerlink" title="2.DGéƒ¨ç½²"></a>2.DGéƒ¨ç½²</h2><h3 id="2-1-å»ºç«‹ä¸»åº“zbdsora"><a href="#2-1-å»ºç«‹ä¸»åº“zbdsora" class="headerlink" title="2.1.å»ºç«‹ä¸»åº“zbdsora"></a>2.1.å»ºç«‹ä¸»åº“zbdsora</h3><p>DBCAå»ºç«‹ä¸»åº“ï¼Œä¿®æ”¹online redo å¤§å°ä¸º500M</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="builtin-name">set</span> linesize 160</span><br><span class="line"><span class="builtin-name">set</span> pagesize 2000</span><br><span class="line">col GROUP# <span class="keyword">for</span> 999</span><br><span class="line">col status <span class="keyword">for</span> a10</span><br><span class="line">col<span class="built_in"> TYPE </span><span class="keyword">for</span> a10</span><br><span class="line">col MEMBER <span class="keyword">for</span> a15</span><br><span class="line">col IS_RECOVERY_DEST_FILE <span class="keyword">for</span> a10</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> v<span class="variable">$log</span>;</span><br><span class="line">select * <span class="keyword">from</span> v<span class="variable">$logfile</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> alter database <span class="builtin-name">add</span> logfile thread 1<span class="built_in"> group </span>1 <span class="string">'/alidata/oradata/zbdsora/redo01.log'</span> size 500M;</span><br><span class="line"> alter database <span class="builtin-name">add</span> logfile thread 1<span class="built_in"> group </span>2 <span class="string">'/alidata/oradata/zbdsora/redo02.log'</span> size 500M;</span><br><span class="line"> alter database <span class="builtin-name">add</span> logfile thread 1<span class="built_in"> group </span>3 <span class="string">'/alidata/oradata/zbdsora/redo03.log'</span> size 500M;</span><br><span class="line"> alter database <span class="builtin-name">add</span> logfile thread 1<span class="built_in"> group </span>4 <span class="string">'/alidata/oradata/zbdsora/redo04.log'</span> size 500M;</span><br><span class="line"> alter database <span class="builtin-name">add</span> logfile thread 1<span class="built_in"> group </span>5 <span class="string">'/alidata/oradata/zbdsora/redo05.log'</span> size 500M;</span><br><span class="line"> </span><br><span class="line">alter database drop logfile<span class="built_in"> group </span>1;</span><br><span class="line">alter database drop logfile<span class="built_in"> group </span>2;</span><br><span class="line">alter database drop logfile<span class="built_in"> group </span>3;</span><br><span class="line"></span><br><span class="line">alter<span class="built_in"> system </span>switch logfile;</span><br><span class="line">alter<span class="built_in"> system </span>checkpoint;</span><br><span class="line">select group#,bytes,status <span class="keyword">from</span> v<span class="variable">$log</span>;</span><br></pre></td></tr></table></figure><h3 id="2-2-ä¸»åº“å¼€å¯å½’æ¡£"><a href="#2-2-ä¸»åº“å¼€å¯å½’æ¡£" class="headerlink" title="2.2.ä¸»åº“å¼€å¯å½’æ¡£"></a>2.2.ä¸»åº“å¼€å¯å½’æ¡£</h3><p>ä¸»åº“å¼€å¯å½’æ¡£å¹¶è®¾ç½®å¼ºåˆ¶æ—¥å¿— force logging</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å¹²å‡€çš„å…³é—­æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="comment">--ä»¥mountæ¨¡å¼å¯åŠ¨</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup mount</span><br><span class="line"><span class="comment">--åˆ‡æ¢åˆ°å½’æ¡£æ¨¡å¼</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> archivelog;</span><br><span class="line"><span class="comment">--å˜æ›´å½’æ¡£è·¯å¾„</span></span><br><span class="line"> <span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> log_archive_dest_1=<span class="string">'location=/alidata/arch'</span>;</span><br><span class="line"><span class="comment">--å¼€å¯å¼ºåˆ¶æ—¥å¿—</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> force logging;</span><br><span class="line"><span class="comment">--æ‰“å¼€æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br><span class="line"><span class="comment">--æŸ¥çœ‹å½’æ¡£</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; archive <span class="keyword">log</span> list;</span><br><span class="line"><span class="comment">--æŸ¥çœ‹æ˜¯å¦ä¸ºå¼ºåˆ¶æ—¥å¿—</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> force_logging <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><h3 id="2-3-ä¸»åº“æ·»åŠ Standby-Redo-Log"><a href="#2-3-ä¸»åº“æ·»åŠ Standby-Redo-Log" class="headerlink" title="2.3.ä¸»åº“æ·»åŠ Standby Redo Log"></a>2.3.ä¸»åº“æ·»åŠ Standby Redo Log</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--æŸ¥çœ‹Redoå’ŒStandby Redo</span><br><span class="line">SQL&gt; select * <span class="keyword">from</span> v<span class="variable">$logfile</span>;</span><br><span class="line">--ä»…ä»…æ˜¾ç¤ºOnline Redoï¼Œä¸æ˜¾ç¤ºStandby Redo</span><br><span class="line">SQL&gt; select * <span class="keyword">from</span> v<span class="variable">$log</span>;</span><br><span class="line">--æ–°å¢ä¸€ç»„å¤§å°ä¸º500Mçš„Standby Redoï¼Œè¿™é‡Œçš„groupå·ä¸å¾—ä¸Online redoé‡å¤</span><br><span class="line">SQL&gt; alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>21 <span class="string">'/alidata/oradata/zbdsora/standby21.log'</span> size 500M;</span><br><span class="line">alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>22 <span class="string">'/alidata/oradata/zbdsora/standby22.log'</span> size 500M;</span><br><span class="line">alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>23 <span class="string">'/alidata/oradata/zbdsora/standby23.log'</span> size 500M;</span><br><span class="line">alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>24 <span class="string">'/alidata/oradata/zbdsora/standby24.log'</span> size 500M;</span><br><span class="line">alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>25 <span class="string">'/alidata/oradata/zbdsora/standby25.log'</span> size 500M;</span><br><span class="line">alter database <span class="builtin-name">add</span> standby logfile<span class="built_in"> group </span>26 <span class="string">'/alidata/oradata/zbdsora/standby26.log'</span> size 500M;</span><br></pre></td></tr></table></figure><h3 id="2-4-ä»ä¸»åº“åˆ›å»ºpfileæ–‡ä»¶"><a href="#2-4-ä»ä¸»åº“åˆ›å»ºpfileæ–‡ä»¶" class="headerlink" title="2.4.ä»ä¸»åº“åˆ›å»ºpfileæ–‡ä»¶"></a>2.4.ä»ä¸»åº“åˆ›å»ºpfileæ–‡ä»¶</h3><p>åˆ›å»ºpfileæ–‡ä»¶, é»˜è®¤è·¯å¾„ä¸º$ORACLE_HOME/dbsï¼Œæ­¤å¤„ä¸º/alidata/oracle/product/11.2.0/db_1/dbs/ï¼Œåœ¨sqlplusé‡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">create</span> pfile <span class="keyword">from</span> spfile;</span><br></pre></td></tr></table></figure><p>å°†ä¸»åº“çš„pfileå¤åˆ¶åˆ°å¤‡åº“/alidata/oracle/product/11.2.0/db_1/dbs/ä¸‹</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/</span><br><span class="line">scp -P <span class="number">40022</span> initzbdsora.ora <span class="symbol">zyadmin@</span><span class="number">172.16</span><span class="number">.35</span><span class="number">.140</span>:/software/dumpfile/</span><br><span class="line">zyadmin/<span class="number">5</span>Eb/<span class="number">5</span>Al!<span class="symbol">7Uy@</span><span class="number">6</span>Oh!</span><br><span class="line"></span><br><span class="line">cp /software/dumpfile/initzbdsora.ora /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/</span><br><span class="line"></span><br><span class="line">chown oracle. /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/initzbdsora.ora</span><br></pre></td></tr></table></figure><h3 id="2-5-è®¾ç½®ä¸»åº“åˆå§‹åŒ–å‚æ•°"><a href="#2-5-è®¾ç½®ä¸»åº“åˆå§‹åŒ–å‚æ•°" class="headerlink" title="2.5.è®¾ç½®ä¸»åº“åˆå§‹åŒ–å‚æ•°"></a>2.5.è®¾ç½®ä¸»åº“åˆå§‹åŒ–å‚æ•°</h3><p>ç¼–è¾‘/alidata/oracle/product/11.2.0/db_1/dbs/initzbdsora.oraæ–‡ä»¶ï¼Œè¿½åŠ </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /alidata/oracle/product/11.2.0/db_1/dbs/initzbdsora.ora &lt;&lt; <span class="string">"EOF"</span></span><br><span class="line">*.<span class="attribute">db_unique_name</span>=<span class="string">'zbdsora'</span></span><br><span class="line">*.<span class="attribute">fal_server</span>=<span class="string">'zbdsora_std'</span></span><br><span class="line">*.<span class="attribute">log_archive_config</span>=<span class="string">'dg_config=(zbdsora,zbdsora_std)'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_1</span>=<span class="string">'location=use_db_recovery_file_dest valid_for=(all_logfiles, all_roles) db_unique_name=zbdsora'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_2</span>=<span class="string">'service=zbdsora_std lgwr async valid_for=(online_logfile,primary_role) db_unique_name=zbdsora_std'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_state_1</span>=ENABLE</span><br><span class="line">*.<span class="attribute">log_archive_dest_state_2</span>=ENABLE</span><br><span class="line">*.<span class="attribute">standby_file_management</span>=<span class="string">'AUTO'</span></span><br><span class="line">*.<span class="attribute">db_file_name_convert</span>=<span class="string">'/alidata/oradata/zbdsora'</span>,'/alidata/oradata/zbdsora'</span><br><span class="line">*.<span class="attribute">log_file_name_convert</span>=<span class="string">'/alidata/oradata/zbdsora'</span>,'/alidata/oradata/zbdsora'</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–°çš„ä¸»åº“spfileæ–‡ä»¶ï¼Œå¹¶é‡æ–°å¯åŠ¨ä¸»åº“</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">create</span> spfile <span class="keyword">from</span> pfile;</span><br><span class="line"><span class="keyword">SQL</span>&gt; startup</span><br></pre></td></tr></table></figure><h3 id="2-6-è®¾ç½®å¤‡åº“åˆå§‹åŒ–å‚æ•°"><a href="#2-6-è®¾ç½®å¤‡åº“åˆå§‹åŒ–å‚æ•°" class="headerlink" title="2.6.è®¾ç½®å¤‡åº“åˆå§‹åŒ–å‚æ•°"></a>2.6.è®¾ç½®å¤‡åº“åˆå§‹åŒ–å‚æ•°</h3><p>ç¼–è¾‘/alidata/oracle/product/11.2.0/db_1/dbs/initzbdsora.oraæ–‡ä»¶ï¼Œä¿®æ”¹å¤‡åº“åˆå§‹åŒ–å‚æ•°</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /alidata/oracle/product/11.2.0/db_1/dbs/initzbdsora.ora &lt;&lt; <span class="string">"EOF"</span></span><br><span class="line">*.<span class="attribute">db_unique_name</span>=<span class="string">'zbdsora_std'</span></span><br><span class="line">*.<span class="attribute">fal_server</span>=<span class="string">'zbdsora'</span></span><br><span class="line">*.<span class="attribute">log_archive_config</span>=<span class="string">'dg_config=(zbdsora,zbdsora_std)'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_1</span>=<span class="string">'location=use_db_recovery_file_dest valid_for=(all_logfiles, all_roles) db_unique_name=zbdsora_std'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_2</span>=<span class="string">'service=zbdsora_pri lgwr async valid_for=(online_logfile,primary_role) db_unique_name=zbdsora'</span></span><br><span class="line">*.<span class="attribute">log_archive_dest_state_1</span>=ENABLE</span><br><span class="line">*.<span class="attribute">log_archive_dest_state_2</span>=ENABLE</span><br><span class="line">*.<span class="attribute">standby_file_management</span>=<span class="string">'AUTO'</span></span><br><span class="line">*.<span class="attribute">db_file_name_convert</span>=<span class="string">'/alidata/oradata/zbdsora'</span>,'/alidata/oradata/zbdsora'</span><br><span class="line">*.<span class="attribute">log_file_name_convert</span>=<span class="string">'/alidata/oradata/zbdsora'</span>,'/alidata/oradata/zbdsora'</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>alter system set log_archive_dest_2=â€™service=zbdsora_pri lgwr async valid_for=(online_logfile,primary_role) db_unique_name=zbdsoraâ€™;</p><h3 id="2-7-å¤åˆ¶ä¸»åº“çš„å¯†ç æ–‡ä»¶åˆ°å¤‡åº“"><a href="#2-7-å¤åˆ¶ä¸»åº“çš„å¯†ç æ–‡ä»¶åˆ°å¤‡åº“" class="headerlink" title="2.7.å¤åˆ¶ä¸»åº“çš„å¯†ç æ–‡ä»¶åˆ°å¤‡åº“"></a>2.7.å¤åˆ¶ä¸»åº“çš„å¯†ç æ–‡ä»¶åˆ°å¤‡åº“</h3><p>å°†å¯†ç æ–‡ä»¶orapwzbdsoraå¤åˆ¶åˆ°å¤‡åº“çš„/alidata/oracle/product/11.2.0/db_1/dbs/ä¸‹</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scp -P <span class="number">40022</span> /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/orapwzbdsora <span class="symbol">zyadmin@</span><span class="number">172.16</span><span class="number">.35</span><span class="number">.140</span>:/software/dumpfile/</span><br><span class="line">zyadmin/<span class="number">5</span>Eb/<span class="number">5</span>Al!<span class="symbol">7Uy@</span><span class="number">6</span>Oh!</span><br><span class="line"></span><br><span class="line">cd /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp /software/dumpfile/orapwzbdsora /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/</span><br><span class="line"></span><br><span class="line">chown oracle. /alidata/oracle/product/<span class="number">11.2</span><span class="number">.0</span>/db_1/dbs/orapwzbdsora</span><br></pre></td></tr></table></figure><h3 id="2-8-åˆ›å»ºå¤‡åº“ç›¸åº”çš„ç›®å½•ç»“æ„"><a href="#2-8-åˆ›å»ºå¤‡åº“ç›¸åº”çš„ç›®å½•ç»“æ„" class="headerlink" title="2.8.åˆ›å»ºå¤‡åº“ç›¸åº”çš„ç›®å½•ç»“æ„"></a>2.8.åˆ›å»ºå¤‡åº“ç›¸åº”çš„ç›®å½•ç»“æ„</h3><p>ä½¿ç”¨oracleç”¨æˆ·åˆ›å»ºä»¥ä¸‹ç›®å½•ï¼Œé¿å…æƒé™é—®é¢˜</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="regexp">/alidata/</span>oradata<span class="regexp">/zbdsora/</span></span><br><span class="line">mkdir -p <span class="regexp">/alidata/</span>oracle<span class="regexp">/admin/</span>zbdsora<span class="regexp">/adump/</span></span><br><span class="line">mkdir -p <span class="regexp">/alidata/</span>oracle<span class="regexp">/fast_recovery_area/</span>zbdsora<span class="regexp">/</span></span><br></pre></td></tr></table></figure><h3 id="2-9-é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç›‘å¬"><a href="#2-9-é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç›‘å¬" class="headerlink" title="2.9.é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç›‘å¬###"></a>2.9.é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç›‘å¬###</h3><p>ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½®ï¼Œé‡‡ç”¨é™æ€ç›‘å¬,æ³¨æ„ä¸€å®šè¦é…ç½®é™æ€ç›‘å¬</p><p>vim /alidata/oracle/product/11.2.0/db_1/network/admin/listener.ora</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">netmgr</span></span><br></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">æ‰‹åŠ¨é…ç½®ï¼š</span><br><span class="line">ä¸»åº“ï¼š</span><br><span class="line"><span class="attr">SID_LIST_LISTENER</span> =</span><br><span class="line">  (<span class="attr">SID_LIST</span> =</span><br><span class="line">    (<span class="attr">SID_DESC</span> =</span><br><span class="line">      (<span class="attr">GLOBAL_DBNAME</span> = zbdsora_pri)</span><br><span class="line">      (<span class="attr">ORACLE_HOME</span> = /alidata/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/db_1)</span><br><span class="line">      (<span class="attr">SID_NAME</span> = zbdsora)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"><span class="attr">LISTENER</span> =</span><br><span class="line">  (<span class="attr">DESCRIPTION_LIST</span> =</span><br><span class="line">    (<span class="attr">DESCRIPTION</span> =</span><br><span class="line">      (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = IPC)(<span class="attr">KEY</span> = EXTPROC1521))</span><br><span class="line">      (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = TCP)(<span class="attr">HOST</span> = <span class="number">172.16</span>.<span class="number">35.141</span>)(<span class="attr">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="attr">ADR_BASE_LISTENER</span> = /alidata/oracle</span><br></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">å¤‡åº“ï¼š</span><br><span class="line"><span class="attr">SID_LIST_LISTENER</span> =</span><br><span class="line">  (<span class="attr">SID_LIST</span> =</span><br><span class="line">    (<span class="attr">SID_DESC</span> =</span><br><span class="line">      (<span class="attr">GLOBAL_DBNAME</span> = zbdsora_std)</span><br><span class="line">      (<span class="attr">ORACLE_HOME</span> = /alidata/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/db_1)</span><br><span class="line">      (<span class="attr">SID_NAME</span> = zbdsora)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="attr">LISTENER</span> =</span><br><span class="line">  (<span class="attr">DESCRIPTION_LIST</span> =</span><br><span class="line">    (<span class="attr">DESCRIPTION</span> =</span><br><span class="line">      (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = IPC)(<span class="attr">KEY</span> = EXTPROC1521))</span><br><span class="line">      (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = TCP)(<span class="attr">HOST</span> = <span class="number">172.16</span>.<span class="number">35.140</span>)(<span class="attr">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="attr">ADR_BASE_LISTENER</span> = /alidata/oracle</span><br></pre></td></tr></table></figure><h3 id="2-10-é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç½‘ç»œæœåŠ¡å"><a href="#2-10-é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç½‘ç»œæœåŠ¡å" class="headerlink" title="2.10.é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç½‘ç»œæœåŠ¡å"></a>2.10.é…ç½®ä¸»åº“å’Œå¤‡åº“çš„ç½‘ç»œæœåŠ¡å</h3><p>ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½®ï¼Œåœ¨ä¸»å¤‡åº“ä¸Šå‡éœ€é…ç½®zbdsoraã€zbdsora_stdä¸¤ä¸ªæœåŠ¡å</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">netmgr</span></span><br></pre></td></tr></table></figure><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">zbdsora_pri =</span><br><span class="line">  (<span class="name">DESCRIPTION</span> =</span><br><span class="line">        (<span class="name">ADDRESS_LIST</span> =</span><br><span class="line">        (<span class="name">ADDRESS</span> = (<span class="name">PROTOCOL</span> = TCP)(<span class="name">HOST</span> = <span class="number">172.16</span>.<span class="number">35.141</span>)(<span class="name">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">        )</span><br><span class="line">        (<span class="name">CONNECT_DATA</span> =</span><br><span class="line">        (<span class="name">sid</span> = zbdsora)</span><br><span class="line">        )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">zbdsora_std =</span><br><span class="line">  (<span class="name">DESCRIPTION</span> =</span><br><span class="line">    (<span class="name">ADDRESS_LIST</span> =</span><br><span class="line">      (<span class="name">ADDRESS</span> = (<span class="name">PROTOCOL</span> = TCP)(<span class="name">HOST</span> = <span class="number">172.16</span>.<span class="number">35.140</span>)(<span class="name">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    )</span><br><span class="line">    (<span class="name">CONNECT_DATA</span> =</span><br><span class="line">      (<span class="name">sid</span> = zbdsora)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ZBDSORA_PRI =</span><br><span class="line">  (<span class="name">DESCRIPTION</span> =</span><br><span class="line">    (<span class="name">ADDRESS_LIST</span> =</span><br><span class="line">      (<span class="name">ADDRESS</span> = (<span class="name">PROTOCOL</span> = TCP)(<span class="name">HOST</span> = <span class="number">172.16</span>.<span class="number">35.141</span>)(<span class="name">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    )</span><br><span class="line">    (<span class="name">CONNECT_DATA</span> =</span><br><span class="line">      (<span class="name">SID</span> = zbdsora)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">ZBDSORA_STD =</span><br><span class="line">  (<span class="name">DESCRIPTION</span> =</span><br><span class="line">    (<span class="name">ADDRESS_LIST</span> =</span><br><span class="line">      (<span class="name">ADDRESS</span> = (<span class="name">PROTOCOL</span> = TCP)(<span class="name">HOST</span> = <span class="number">172.16</span>.<span class="number">35.140</span>)(<span class="name">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    )</span><br><span class="line">    (<span class="name">CONNECT_DATA</span> =</span><br><span class="line">      (<span class="name">SID</span> = zbdsora)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><h3 id="2-11-åˆ›å»ºå¤‡åº“å¹¶å¯åŠ¨"><a href="#2-11-åˆ›å»ºå¤‡åº“å¹¶å¯åŠ¨" class="headerlink" title="2.11.åˆ›å»ºå¤‡åº“å¹¶å¯åŠ¨"></a>2.11.åˆ›å»ºå¤‡åº“å¹¶å¯åŠ¨</h3><p>åˆ›å»ºå¤‡åº“çš„spfileæ–‡ä»¶ï¼Œå¯åŠ¨å¤‡åº“åˆ°nomountæ¨¡å¼</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">create</span> spfile <span class="keyword">from</span> pfile;</span><br><span class="line"><span class="keyword">SQL</span>&gt; startup nomount</span><br></pre></td></tr></table></figure><h3 id="2-12-RMANå¤åˆ¶ä¸»åº“åˆ°å¤‡åº“"><a href="#2-12-RMANå¤åˆ¶ä¸»åº“åˆ°å¤‡åº“" class="headerlink" title="2.12.RMANå¤åˆ¶ä¸»åº“åˆ°å¤‡åº“"></a>2.12.RMANå¤åˆ¶ä¸»åº“åˆ°å¤‡åº“</h3><p>é¦–å…ˆRMANè¿æ¥åˆ°ç›®æ ‡æ•°æ®åº“å’Œè¾…åŠ©æ•°æ®åº“</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rman <span class="keyword">target</span> sys/oracle<span class="meta">@zbdsora</span>_pri auxiliary sys/oracle<span class="meta">@zbdsora</span>_std</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨RMANçš„duplicateå‘½ä»¤è¿›è¡Œå¤åˆ¶ï¼Œä¸¤è¾¹ç›®å½•ç»“æ„ç›¸åŒï¼Œéœ€è¦æ·»åŠ nofilenamecheckå‚æ•°</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RMAN&gt; duplicate target <span class="keyword">database</span> <span class="keyword">for</span> standby <span class="keyword">from</span> active <span class="keyword">database</span> nofilenamecheck;</span><br></pre></td></tr></table></figure><p>å¤åˆ¶æˆåŠŸåï¼Œå¤‡åº“è‡ªåŠ¨è¢«åŠ è½½ä¸ºmountæ¨¡å¼ï¼Œè¿›å…¥sqlplusæŸ¥çœ‹</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">select</span> status <span class="keyword">from</span> v$instance;</span><br></pre></td></tr></table></figure><h3 id="2-13-åœ¨å¤‡åº“å¼€å¯å®æ—¶æ—¥å¿—åº”ç”¨"><a href="#2-13-åœ¨å¤‡åº“å¼€å¯å®æ—¶æ—¥å¿—åº”ç”¨" class="headerlink" title="2.13.åœ¨å¤‡åº“å¼€å¯å®æ—¶æ—¥å¿—åº”ç”¨"></a>2.13.åœ¨å¤‡åº“å¼€å¯å®æ—¶æ—¥å¿—åº”ç”¨</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> <span class="keyword">using</span> <span class="keyword">current</span> logfile disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br></pre></td></tr></table></figure><h3 id="2-14-ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢"><a href="#2-14-ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢" class="headerlink" title="2.14.ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢"></a>2.14.ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> switchover_status,database_role <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br><span class="line"><span class="comment">--ä¸»åº“æ˜¾ç¤ºï¼šTO STANDBY/PRIMARYï¼Œå¦‚æœæ˜¾ç¤ºSESSION ACTIVEè¡¨ç¤ºè¿˜æœ‰æ´»åŠ¨çš„ä¼šè¯ï¼Œéœ€è¦å…³é—­æ´»åŠ¨çš„ä¼šè¯å†æ£€æŸ¥</span></span><br><span class="line"><span class="comment">--å¤‡åº“æ˜¾ç¤ºï¼šNOT ALLOWED/PHYSICAL STANDBY</span></span><br></pre></td></tr></table></figure><h2 id="3-æµ‹è¯•DG"><a href="#3-æµ‹è¯•DG" class="headerlink" title="3.æµ‹è¯•DG"></a>3.æµ‹è¯•DG</h2><h3 id="3-1-æ‰§è¡Œæ—¥å¿—åˆ‡æ¢æµ‹è¯•"><a href="#3-1-æ‰§è¡Œæ—¥å¿—åˆ‡æ¢æµ‹è¯•" class="headerlink" title="3.1.æ‰§è¡Œæ—¥å¿—åˆ‡æ¢æµ‹è¯•"></a>3.1.æ‰§è¡Œæ—¥å¿—åˆ‡æ¢æµ‹è¯•</h3><p>åœ¨ä¸»åº“ç«¯åˆ‡æ¢å½’æ¡£ï¼Œåœ¨å¤‡åº“æ£€æŸ¥æ˜¯å¦ä¹Ÿå‘ç”Ÿäº†åˆ‡æ¢</p><p>ä¸»åº“ä¸Šæ‰§è¡Œæ—¥å¿—åˆ‡æ¢</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; archive log list;</span><br><span class="line">SQL&gt; alter<span class="built_in"> system </span>switch logfile;</span><br><span class="line">archive log list;</span><br></pre></td></tr></table></figure><p>å¤‡åº“ä¸ŠæŸ¥çœ‹ï¼Œæ—¥å¿—çš„sequenceå·ä¹Ÿè·Ÿç€å˜äº†</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; archive <span class="built_in">log</span> <span class="built_in">list</span>;</span><br></pre></td></tr></table></figure><h3 id="3-2-æŸ¥çœ‹å¤‡åº“å¯åŠ¨çš„DGè¿›ç¨‹"><a href="#3-2-æŸ¥çœ‹å¤‡åº“å¯åŠ¨çš„DGè¿›ç¨‹" class="headerlink" title="3.2.æŸ¥çœ‹å¤‡åº“å¯åŠ¨çš„DGè¿›ç¨‹"></a>3.2.æŸ¥çœ‹å¤‡åº“å¯åŠ¨çš„DGè¿›ç¨‹</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select process,client_process,sequence#,status <span class="keyword">from</span> v$managed_standby;</span><br><span class="line">PROCESS   CLIENT_P  SEQUENCE# STATUS  </span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">ARCH      ARCH             <span class="number">23</span> CLOSING  </span><br><span class="line">ARCH      ARCH              <span class="number">0</span> CONNECTED            <span class="comment">//å½’æ¡£è¿›ç¨‹  </span></span><br><span class="line">ARCH      ARCH             <span class="number">21</span> CLOSING  </span><br><span class="line">ARCH      ARCH              <span class="number">0</span> CONNECTED  </span><br><span class="line">RFS       ARCH              <span class="number">0</span> IDLE  </span><br><span class="line">RFS       UNKNOWN           <span class="number">0</span> IDLE  </span><br><span class="line">RFS       LGWR             <span class="number">24</span> IDLE               <span class="comment">//å½’æ¡£ä¼ è¾“è¿›ç¨‹  </span></span><br><span class="line">RFS       UNKNOWN           <span class="number">0</span> IDLE  </span><br><span class="line">MRP0      N/A              <span class="number">24</span> APPLYING_LOG      <span class="comment">//æ—¥å¿—åº”ç”¨è¿›ç¨‹  </span></span><br><span class="line"></span><br><span class="line"><span class="number">9</span> rows selected.</span><br></pre></td></tr></table></figure><h3 id="3-3-æŸ¥çœ‹æ•°æ®åº“çš„ä¿æŠ¤æ¨¡å¼"><a href="#3-3-æŸ¥çœ‹æ•°æ®åº“çš„ä¿æŠ¤æ¨¡å¼" class="headerlink" title="3.3.æŸ¥çœ‹æ•°æ®åº“çš„ä¿æŠ¤æ¨¡å¼"></a>3.3.æŸ¥çœ‹æ•°æ®åº“çš„ä¿æŠ¤æ¨¡å¼</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> database_role,protection_mode,protection_level,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br><span class="line">DATABASE_ROLE    PROTECTION_MODE      PROTECTION_LEVEL     OPEN_MODE  </span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">PRIMARY</span>          MAXIMUM PERFORMANCE  MAXIMUM PERFORMANCE  <span class="keyword">READ</span> <span class="keyword">WRITE</span></span><br></pre></td></tr></table></figure><h3 id="3-4-æŸ¥çœ‹DGçš„æ—¥å¿—ä¿¡æ¯"><a href="#3-4-æŸ¥çœ‹DGçš„æ—¥å¿—ä¿¡æ¯" class="headerlink" title="3.4.æŸ¥çœ‹DGçš„æ—¥å¿—ä¿¡æ¯"></a>3.4.æŸ¥çœ‹DGçš„æ—¥å¿—ä¿¡æ¯</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">select</span> * <span class="keyword">from</span> v$dataguard_status;</span><br></pre></td></tr></table></figure><h3 id="3-5-Open-Read-Only-Standbyæ•°æ®åº“"><a href="#3-5-Open-Read-Only-Standbyæ•°æ®åº“" class="headerlink" title="3.5.Open Read Only Standbyæ•°æ®åº“"></a>3.5.Open Read Only Standbyæ•°æ®åº“</h3><p>ä»¥åªè¯»æ–¹å¼æ‰“å¼€å¤‡åº“ï¼Œå¹¶å¼€å¯å®æ—¶æ—¥å¿—åº”ç”¨</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> database_role,protection_mode,protection_level,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> process,client_process,<span class="keyword">sequence</span>#,status <span class="keyword">from</span> v$managed_standby;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> <span class="keyword">using</span> <span class="keyword">current</span> logfile disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br></pre></td></tr></table></figure><h3 id="3-6-è§£é”scottç”¨æˆ·å¹¶æ·»åŠ æ•°æ®ï¼ŒéªŒè¯æ˜¯å¦åŒæ­¥"><a href="#3-6-è§£é”scottç”¨æˆ·å¹¶æ·»åŠ æ•°æ®ï¼ŒéªŒè¯æ˜¯å¦åŒæ­¥" class="headerlink" title="3.6.è§£é”scottç”¨æˆ·å¹¶æ·»åŠ æ•°æ®ï¼ŒéªŒè¯æ˜¯å¦åŒæ­¥"></a>3.6.è§£é”scottç”¨æˆ·å¹¶æ·»åŠ æ•°æ®ï¼ŒéªŒè¯æ˜¯å¦åŒæ­¥</h3><p>åœ¨ä¸»åº“è§£é”scottç”¨æˆ·å¹¶åˆ›å»ºæµ‹è¯•è¡¨ï¼Œæ’å…¥10000è¡Œæ•°æ®ã€‚</p><p>æ“ä½œå¦‚ä¸‹</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">set</span> <span class="type">line</span> <span class="number">200</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> username,default_tablespace,account_status <span class="keyword">from</span> dba_users <span class="keyword">where</span> username=<span class="string">'SCOTT'</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">user</span> scott account unlock;</span><br><span class="line"><span class="keyword">SQL</span>&gt; conn scott/tiger;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">show</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">create</span> <span class="keyword">table</span> test001 (id number(<span class="number">10</span>),<span class="type">name</span> varchar2(<span class="number">20</span>));</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">begin</span></span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10000</span> <span class="keyword">loop</span></span><br><span class="line">     <span class="keyword">insert</span> <span class="keyword">into</span> test001 <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'ww'</span>);</span><br><span class="line">     <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">     <span class="keyword">end</span>;</span><br><span class="line">     /</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure><p>standbyç«¯æŸ¥è¯¢scottç”¨æˆ·æ˜¯å¦è§£é”ï¼Œä»¥åŠtest001è¡¨æ˜¯å¦åˆ›å»ºå¹¶ä¸”æ’å…¥äº†10000è¡Œæ•°æ®</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; conn scott/tiger;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> * <span class="keyword">from</span> tab;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> count(*) <span class="keyword">from</span> scott.test001;</span><br></pre></td></tr></table></figure><h2 id="4-DGä¸‰ç§æ¨¡å¼"><a href="#4-DGä¸‰ç§æ¨¡å¼" class="headerlink" title="4.DGä¸‰ç§æ¨¡å¼"></a>4.DGä¸‰ç§æ¨¡å¼</h2><h3 id="4-1-æœ€å¤§æ€§èƒ½æ¨¡å¼max-performance-é»˜è®¤"><a href="#4-1-æœ€å¤§æ€§èƒ½æ¨¡å¼max-performance-é»˜è®¤" class="headerlink" title="4.1.æœ€å¤§æ€§èƒ½æ¨¡å¼max performance-é»˜è®¤"></a>4.1.æœ€å¤§æ€§èƒ½æ¨¡å¼max performance-é»˜è®¤</h3><p>è¿™ç§ä¿æŠ¤æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰æä¾›äº†å¯èƒ½çš„æœ€é«˜çº§åˆ«çš„æ•°æ®ä¿æŠ¤ï¼Œè€Œä¸å½±å“ä¸»æ•°æ®åº“çš„æ€§èƒ½ã€‚è¿™æ˜¯é€šè¿‡å…è®¸äº‹åŠ¡åœ¨æ¢å¤è¯¥äº‹åŠ¡æ‰€éœ€é‡åšæ•°æ®åœ¨å†™åˆ°æœ¬åœ°è”æœºé‡åšæ—¥å¿—åç«‹å³æäº¤è€Œå®ç°çš„ã€‚ä¸»æ•°æ®åº“çš„é‡åšæ•°æ®æµä¹Ÿå†™åˆ°è‡³å°‘ä¸€ä¸ªå¤‡æ•°æ®åº“ï¼Œä½†æ˜¯é‚£ä¸ªé‡åšæµç›¸å¯¹äºåˆ›å»ºé‡åšæ•°æ®çš„äº‹åŠ¡æ˜¯å¼‚æ­¥å†™çš„ã€‚</p><p>å½“æ‰€ç”¨çš„ç½‘ç»œè¿æ¥æœ‰è¶³å¤Ÿçš„å¸¦å®½ï¼Œè¿™ç§æ¨¡å¼æä¾›äº†è¿‘ä¼¼äºæœ€å¤§å¯ç”¨æ€§æ¨¡å¼çš„æ•°æ®ä¿æŠ¤çº§åˆ«ï¼Œå¹¶ä¸”å¯¹ä¸»æ•°æ®åº“æ€§èƒ½çš„å½±å“æœ€å°ã€‚</p><h3 id="4-2-æœ€å¤§å¯ç”¨æ€§æ¨¡å¼max-availability"><a href="#4-2-æœ€å¤§å¯ç”¨æ€§æ¨¡å¼max-availability" class="headerlink" title="4.2.æœ€å¤§å¯ç”¨æ€§æ¨¡å¼max availability"></a>4.2.æœ€å¤§å¯ç”¨æ€§æ¨¡å¼max availability</h3><p>è¿™ç§ä¿æŠ¤æ¨¡å¼æä¾›äº†å¯èƒ½çš„æœ€é«˜çº§åˆ«çš„æ•°æ®ä¿æŠ¤ï¼Œè€Œä¸ç”¨ä¸ä¸»æ•°æ®åº“çš„å¯ç”¨æ€§ç›¸æŠ˜è¡·ã€‚ä¸æœ€å¤§ä¿æŠ¤æ¨¡å¼ç›¸åŒï¼Œåœ¨æ¢å¤äº‹åŠ¡æ‰€éœ€çš„é‡åšå†™åˆ°æœ¬åœ°è”æœºé‡åšæ—¥å¿—å’Œè‡³å°‘ä¸€ä¸ªäº‹åŠ¡ä¸€è‡´æ€§å¤‡æ•°æ®åº“ä¸Šçš„å¤‡é‡åšæ—¥å¿—ä¹‹å‰ï¼Œäº‹åŠ¡å°†ä¸ä¼šæäº¤ã€‚ä¸æœ€å¤§ä¿æŠ¤æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ•…éšœå¯¼è‡´ä¸»æ•°æ®åº“æ— æ³•å†™é‡åšæµåˆ°å¼‚åœ°å¤‡é‡åšæ—¥å¿—æ—¶ï¼Œä¸»æ•°æ®åº“ä¸ä¼šå…³é—­ã€‚æ›¿ä»£åœ°ï¼Œä¸»æ•°æ®åº“ä»¥æœ€å¤§æ€§èƒ½æ¨¡å¼è¿è¡Œç›´åˆ°æ•…éšœæ¶ˆé™¤ï¼Œå¹¶ä¸”è§£å†³æ‰€æœ‰é‡åšæ—¥å¿—æ–‡ä»¶ä¸­çš„ä¸­æ–­ã€‚å½“æ‰€æœ‰ä¸­æ–­è§£å†³ä¹‹åï¼Œä¸»æ•°æ®åº“è‡ªåŠ¨ç»§ç»­ä»¥æœ€å¤§å¯ç”¨æ€§æ¨¡å¼è¿è¡Œã€‚</p><p>è¿™ç§æ¨¡å¼ç¡®ä¿å¦‚æœä¸»æ•°æ®åº“æ•…éšœï¼Œä½†æ˜¯åªæœ‰å½“ç¬¬äºŒæ¬¡æ•…éšœæ²¡æœ‰é˜»æ­¢å®Œæ•´çš„é‡åšæ•°æ®é›†ä»ä¸»æ•°æ®åº“å‘é€åˆ°è‡³å°‘ä¸€ä¸ªå¤‡æ•°æ®åº“æ—¶ï¼Œä¸å‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚</p><h3 id="4-3-æœ€å¤§ä¿æŠ¤æ¨¡å¼max-protection"><a href="#4-3-æœ€å¤§ä¿æŠ¤æ¨¡å¼max-protection" class="headerlink" title="4.3.æœ€å¤§ä¿æŠ¤æ¨¡å¼max protection"></a>4.3.æœ€å¤§ä¿æŠ¤æ¨¡å¼max protection</h3><p>è¿™ç§ä¿æŠ¤æ¨¡å¼ç¡®ä¿å¦‚æœä¸»æ•°æ®åº“æ•…éšœä¸ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚è¦æä¾›è¿™ç§çº§åˆ«çš„ä¿æŠ¤ï¼Œæ¢å¤æ¯ä¸ªäº‹åŠ¡æ‰€éœ€çš„é‡åšæ•°æ®å¿…é¡»åœ¨äº‹åŠ¡æäº¤ä¹‹å‰åŒæ—¶å†™åˆ°æœ¬åœ°è”æœºé‡åšæ—¥å¿—å’Œè‡³å°‘ä¸€ä¸ªå¤‡æ•°æ®åº“ä¸Šçš„å¤‡é‡åšæ—¥å¿—ã€‚è¦ç¡®ä¿ä¸å‘ç”Ÿæ•°æ®ä¸¢å¤±ï¼Œå¦‚æœæ•…éšœå¯¼è‡´ä¸»æ•°æ®åº“æ— æ³•å†™é‡åšæµåˆ°è‡³å°‘ä¸€ä¸ªäº‹åŠ¡ä¸€è‡´æ€§å¤‡æ•°æ®åº“çš„å¤‡é‡åšæ—¥å¿—æ—¶ï¼Œä¸»æ•°æ®åº“ä¼šå…³é—­ã€‚</p><h3 id="4-4-æŸ¥è¯¢å½“å‰æ¨¡å¼"><a href="#4-4-æŸ¥è¯¢å½“å‰æ¨¡å¼" class="headerlink" title="4.4.æŸ¥è¯¢å½“å‰æ¨¡å¼"></a>4.4.æŸ¥è¯¢å½“å‰æ¨¡å¼</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">select</span> protection_mode,protection_level <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><h2 id="5-DGåˆ‡æ¢æµ‹è¯•"><a href="#5-DGåˆ‡æ¢æµ‹è¯•" class="headerlink" title="5.DGåˆ‡æ¢æµ‹è¯•"></a>5.DGåˆ‡æ¢æµ‹è¯•</h2><h3 id="5-1-DG-switchover-åˆ‡æ¢æµ‹è¯•"><a href="#5-1-DG-switchover-åˆ‡æ¢æµ‹è¯•" class="headerlink" title="5.1.DG switchover åˆ‡æ¢æµ‹è¯•"></a>5.1.DG switchover åˆ‡æ¢æµ‹è¯•</h3><p>db11-zbdsoraï¼šä¸»åº“â€”â€”&gt;å¤‡åº“</p><p>db12-zbdsoraï¼šå¤‡åº“â€”â€”&gt;ä¸»åº“</p><p>ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> switchover_status,database_role,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br><span class="line"><span class="comment">--db11-zbdsoraæ˜¾ç¤ºï¼šTO STANDBY/PRIMARYï¼Œå¦‚æœæ˜¾ç¤ºSESSION ACTIVEè¡¨ç¤ºè¿˜æœ‰æ´»åŠ¨çš„ä¼šè¯ï¼Œéœ€è¦å…³é—­ä¼šè¯å†æ£€æŸ¥</span></span><br><span class="line"><span class="comment">--db12-zbdsoraæ˜¾ç¤ºï¼šNOT ALLOWED/PHYSICAL STANDBY</span></span><br></pre></td></tr></table></figure><p>ä¸»-zbdsoraåˆ‡æ¢åˆ°å¤‡åº“</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">commit</span> <span class="keyword">to</span> switchover <span class="keyword">to</span> physical standby;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">commit</span> <span class="keyword">to</span> switchover <span class="keyword">to</span> physical standby <span class="keyword">with</span> <span class="keyword">session</span> shutdown;</span><br><span class="line"><span class="comment">--å¦‚æœçŠ¶æ€æ˜¾ç¤ºSESSION ACTIVEï¼Œåœ¨åˆ‡æ¢çš„æ—¶å€™å¯ä»¥æŒ‡å®šwith session shutdown å­å¥å¼ºåˆ¶å…³é—­æ´»åŠ¨çš„ä¼šè¯ã€‚</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup mount</span><br></pre></td></tr></table></figure><p>ä»-zbdsoraåˆ‡æ¢åˆ°ä¸»åº“</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">commit</span> <span class="keyword">to</span> switchover <span class="keyword">to</span> <span class="keyword">primary</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br></pre></td></tr></table></figure><p>db11-zbdsoraæ‰§è¡ŒAPPLY LOGå‘½ä»¤</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å¯ç”¨mountçŠ¶æ€ä¸‹çš„APPLY LOG</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br><span class="line"><span class="comment">--å¯ç”¨opençŠ¶æ€ï¼ˆREAD ONLY WITH APPLYï¼‰ä¸‹çš„APPLY LOG</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> cancel;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> switchover_status,database_role,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><h3 id="5-2-DG-failover-åˆ‡æ¢æµ‹è¯•"><a href="#5-2-DG-failover-åˆ‡æ¢æµ‹è¯•" class="headerlink" title="5.2.DG failover åˆ‡æ¢æµ‹è¯•"></a>5.2.DG failover åˆ‡æ¢æµ‹è¯•</h3><p>db11-zbdsoraï¼šä¸»åº“â€”â€”&gt;å´©æºƒ</p><p>db12-zbdsoraï¼šå¤‡åº“â€”â€”&gt;ä¸»åº“</p><p>ä¸»å¤‡åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">select</span> switchover_status,database_role,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><p>db11-zbdsoraé€šè¿‡shutdown abortæ–¹å¼äººå·¥æ¨¡æ‹Ÿä¸»åº“å´©æºƒï¼Œç›´æ¥å…³é—­</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select open_mode <span class="keyword">from</span> v<span class="variable">$database</span>;</span><br><span class="line">SQL&gt; shutdown abort</span><br><span class="line">SQL&gt; startup mount</span><br><span class="line">SQL&gt; alter<span class="built_in"> system </span>flush redo <span class="keyword">to</span> <span class="string">'zbdsora_std'</span>;</span><br></pre></td></tr></table></figure><p>db12-zbdsoraæ‰§è¡Œå¦‚ä¸‹æ“ä½œåˆ‡æ¢ä¸ºä¸»åº“</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> thread#, low_sequence#, high_sequence# <span class="keyword">from</span> v$archive_gap;</span><br><span class="line"><span class="comment">--å¦‚æœæ²¡æœ‰å‘ç°æ˜æ˜¾çš„gapç°è±¡ï¼Œè¯´æ˜æ­¤æ¬¡çš„failoverä¸ä¼šæœ‰æ•°æ®æŸå¤±æƒ…å†µã€‚åœ¨å¤‡åº“ï¼Œè¦è¿›è¡Œå…³é—­applyå’Œç»“æŸåº”ç”¨åŠ¨ä½œã€‚</span></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> cancel;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> finish;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">commit</span> <span class="keyword">to</span> switchover <span class="keyword">to</span> <span class="keyword">primary</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> open_mode, switchover_status <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><h3 id="5-3-DG-failoveråé‡å»ºDG"><a href="#5-3-DG-failoveråé‡å»ºDG" class="headerlink" title="5.3.DG failoveråé‡å»ºDG"></a>5.3.DG failoveråé‡å»ºDG</h3><p>db11-zbdsoraï¼šå´©æºƒâ€”â€”&gt;å¤‡åº“</p><p>db12-zbdsoraï¼šä¸»åº“â€”â€”&gt;ä¸»åº“ï¼ˆä¿æŒä¸»åº“çŠ¶æ€ä¸å˜ï¼‰</p><p>db12-zbdsoraä¸»åº“è§’è‰²çŠ¶æ€æŸ¥è¯¢</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; <span class="keyword">select</span> switchover_status,database_role,open_mode <span class="keyword">from</span> v$<span class="keyword">database</span>;</span><br></pre></td></tr></table></figure><p>db12-zbdsoraä¸»åº“åˆ›å»ºå¤‡åº“æ§åˆ¶æ–‡ä»¶</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /u01/bak/</span><br></pre></td></tr></table></figure><p>SQL&gt; alter database create standby controlfile as â€˜/u01/bak/control01.ctlâ€™;</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line">å°†å¤‡åº“æ§åˆ¶æ–‡ä»¶æ‹·è´è‡³db11</span><br><span class="line">scp ezdb12:/u01/bak/control01.ctl /alidata/oradata/zbdsora/control01.ctl</span><br><span class="line">cp /alidata/oradata/zbdsora/control01.ctl /u01/app/oracle/fast_recovery_area/zbdsora/</span><br><span class="line">mv /u01/app/oracle/fast_recovery_area/zbdsora/control01.ctl /u01/app/oracle/fast_recovery_area/zbdsora/control02.ctl</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">æ¢å¤å¯¹åº”æ•°æ®æ–‡ä»¶è‡³db11ï¼Œå¹¶å¯åŠ¨db11-zbdsoraåˆ°mountçŠ¶æ€ï¼Œåº”ç”¨APPLYæ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup mount;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">å¯åŠ¨db11-zbdsoraè‡³<span class="keyword">OPEN</span>çŠ¶æ€ï¼Œå¹¶åº”ç”¨APPLY REDOæ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> cancel;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">6.</span>å¼€å¯å’Œå…³é—­DataGuardçš„æµç¨‹</span><br><span class="line"><span class="number">6.1</span>.å…³é—­</span><br><span class="line">å…³é—­ä¸»åº“</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">å…³é—­ä¸»åº“ç›‘å¬</span><br><span class="line"></span><br><span class="line">lsnrctl stop</span><br><span class="line"><span class="number">1</span></span><br><span class="line">æŸ¥è¯¢å¤‡åº“æ˜¯å¦æ­£åœ¨æ‰§è¡Œé‡åšåº”ç”¨æˆ–å®æ—¶åº”ç”¨ã€‚å¦‚æœMRP0æˆ–MRPè¿›ç¨‹å­˜åœ¨ï¼Œåˆ™å¤‡åº“æ­£åœ¨åº”ç”¨é‡åšã€‚</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">select</span> process, status <span class="keyword">from</span> v$managed_standby;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">å¦‚æœé‡åšåº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œåœæ­¢å¤‡åº“çš„Redoæ—¥å¿—çš„åº”ç”¨</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> cancel;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">å…³é—­å¤‡åº“</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; shutdown <span class="keyword">immediate</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">å…³é—­å¤‡åº“ç›‘å¬</span><br><span class="line"></span><br><span class="line">lsnrctl stop</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">6.2</span>.å¼€å¯</span><br><span class="line">å¯åŠ¨å¤‡åº“ç›‘å¬</span><br><span class="line"></span><br><span class="line">lsnrctl <span class="keyword">start</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">å¯åŠ¨å¤‡åº“åˆ°mountçŠ¶æ€</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup mount;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">å¼€å¯å¤‡åº“çš„Redoæ—¥å¿—åº”ç”¨</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; <span class="keyword">alter</span> <span class="keyword">database</span> recover managed standby <span class="keyword">database</span> <span class="keyword">using</span> <span class="keyword">current</span> logfile disconnect <span class="keyword">from</span> <span class="keyword">session</span>;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">å¯åŠ¨ä¸»åº“ç›‘å¬</span><br><span class="line"></span><br><span class="line">lsnrctl <span class="keyword">start</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">å¯åŠ¨ä¸»åº“</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span>&gt; startup;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">æ£€æŸ¥æ—¥å¿—æƒ…å†µçš„<span class="keyword">SQL</span>è¯­å¥</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> al.thrd "Thread", almax "Last Seq Received", lhmax "Last Seq Applied"</span><br><span class="line"> <span class="keyword">from</span> (<span class="keyword">select</span> thread# thrd, max(<span class="keyword">sequence</span>#) almax</span><br><span class="line">       <span class="keyword">from</span> v$archived_log</span><br><span class="line">       <span class="keyword">where</span> resetlogs_change#=(<span class="keyword">select</span> resetlogs_change# <span class="keyword">from</span> v$<span class="keyword">database</span>)</span><br><span class="line">       <span class="keyword">group</span> <span class="keyword">by</span> thread#) al,</span><br><span class="line">      (<span class="keyword">select</span> thread# thrd, max(<span class="keyword">sequence</span>#) lhmax</span><br><span class="line">       <span class="keyword">from</span> v$log_history</span><br><span class="line">       <span class="keyword">where</span> first_time=(<span class="keyword">select</span> max(first_time) <span class="keyword">from</span> v$log_history)</span><br><span class="line">       <span class="keyword">group</span> <span class="keyword">by</span> thread#) lh</span><br><span class="line"> <span class="keyword">where</span> al.thrd = lh.thrd;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-ç¯å¢ƒä»‹ç»&quot;&gt;&lt;a href=&quot;#1-ç¯å¢ƒä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;1.ç¯å¢ƒä»‹ç»&quot;&gt;&lt;/a&gt;1.ç¯å¢ƒä»‹ç»&lt;/h2&gt;&lt;p&gt;ç™¾è´§â€“æ•°æ®åº“æœåŠ¡å™¨&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ä¾‹åç§°&lt;/th&gt;
&lt;th&gt;I
      
    
    </summary>
    
    
      <category term="Oracle" scheme="https://husky-wu.github.io/categories/Oracle/"/>
    
    
      <category term="Oracle" scheme="https://husky-wu.github.io/tags/Oracle/"/>
    
      <category term="Data Guard" scheme="https://husky-wu.github.io/tags/Data-Guard/"/>
    
      <category term="ä¸»ä»" scheme="https://husky-wu.github.io/tags/%E4%B8%BB%E4%BB%8E/"/>
    
  </entry>
  
</feed>
